### 微服务

微服务架构风格，就像是把一个单独的应用程序开发成一套小服务，每个小服务运行在自己的进程中，并使用轻量级机制通信，通常是 HTTP API 这些服务围绕业务能力来构建，	并通过完全自动化部署机制来独立部署，这些服务使用不同的编程语言书写，以及不同数据存储技术，并保持最低限度的集中式管理。

简而言之，拒绝大型单体应用，基于业务边界进行服务微化拆分，每个服务独立部署运行。



### **集群、分布式、节点**

集群是个物理状态，分布式是个工作方式

只要是一堆机器，也可以叫做集群，他们是不是一起协作干活，这谁也不知道。

《分布式系统原理与范型》定义：分布式系统是若干独立计算机的集合，这些计算机对于用户来说像单个系统

分布式系统 (distributed system) 是建立网络之上的软件系统

分布式是指根据不同的业务分布在不同的地方

集群指的是将几台服务器集中在一起，实现同一业务

例如：京东是一个分布式系统，众多业务运行在不同的机器上，所有业务构成一个大型的分布式业务集群，每一个小的业务，比如用户系统，访问压力大的时候一台服务器是不够的，我们就应该将用户系统部署到多个服务器，也就是每一个业务系统也可以做集群化

分布式中的每一个节点，都可以做集群，而集群并不一定就是分布式的

节点：集群中的一个服务器



### 远程调用

在分布式系统中，各个服务可能处于不同主机，但是服务之间不可避免的需要 互相调用，我们称之为远程调用。SpringCloud中使用HTTP+JSON的方式来完成远程调用



### 负载均衡

分布式系统中，A 服务需要调用B服务，B服务在多台机器中都存在， A调用任意一个服务器均可完成功能

为了使每一个服务器都不要太或者太闲，我们可以负载均衡调用每一个服务器，提升网站的健壮性

常见的负载均衡算法：
轮询：为第一个请求选择健康池中的每一个后端服务器，然后按顺序往后依次选择，直到最后一个，然后循环

最小连接：优先选择链接数最少，也就是压力最小的后端服务器，在会话较长的情况下可以考虑采取这种方式



### 服务熔断&服务降级

在微服务架构中，微服务之间通过网络来进行通信，存在相互依赖， 当其中一个服务不可用时，有可能会造成雪崩效应，要防止这种情 况，必须要有容错机制来保护服务

1、服务熔断
设置服务的超时，当被调用的服务经常失败到达某个阈值，我们可以开启断路保护机制，后来的请求不再去调用这个服务，本地直接返回默认的数据

2、服务降级
在运维期间，当系统处于高峰期，系统资源紧张，我们可以让非核心业务降级运行，降级：某些服务不处理，或者简单处理【抛异常，返回NULL，调用 Mock数据，调用 FallBack 处理逻辑】



### API 网关

在微服务架构中，API Gateway 作为整体架构的重要组件，抽象服务中 需要的公共功能，同时它提供了客户端负载均衡，服务自动熔断，灰度发布，统 一认证，限流监控，日志统计等丰富功能，帮助我们解决很多API管理的难题
